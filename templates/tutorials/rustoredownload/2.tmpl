<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–∏–º—É–ª—è—Ç–æ—Ä RuStore</title>
    <style>
        :root {
            --ru-blue: #0077FF;
            --ru-bg: #FFFFFF;
            --ru-gray: #F2F3F5;
            --ru-text: #19191D;
            --ru-subtext: #8E8E93;
            /* –¶–≤–µ—Ç–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã */
            --kb-bg: #E8EAED;
            --kb-key-white: #FFFFFF;
            --kb-key-dark: #DADCE0;
        }

        /*body {*/
        /*    font-family: Roboto, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;*/
        /*    background-color: #eef1f5;*/
        /*    margin: 0;*/
        /*    padding: 20px;*/
        /*    display: flex;*/
        /*    justify-content: center;*/
        /*}*/

        .simulator-wrapper {
            display: flex;
            gap: 40px;
            max-width: 1100px;
            width: 100%;
            align-items: flex-start;
            flex-wrap: wrap;
	        flex-direction: row-reverse;
        }

        /* --- –õ–ï–í–ê–Ø –ü–ê–ù–ï–õ–¨: –ò–ù–°–¢–†–£–ö–¶–ò–ò --- */
        .guide-panel {
            flex: 1;
            min-width: 300px;
            background: white;
            padding: 30px;
            border-radius: 24px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .step-badge {
            display: inline-block;
            background: var(--ru-blue);
            color: white;
            padding: 6px 14px;
            border-radius: 50px;
            font-weight: 600;
            font-size: clamp(18px, 2.4vw, 20px);
            margin-bottom: 20px;
            text-transform: uppercase;
        }

        .info-progress {
            display: grid;
            gap: 8px;
            margin-bottom: 18px;
        }

        .info-progress-label {
            font-size: clamp(18px, 2.4vw, 20px);
            color: #5f6368;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-weight: 700;
        }

        .info-progress-track {
            display: grid;
            grid-template-columns: repeat(var(--segments-count, 8), minmax(0, 1fr));
            gap: 8px;
        }

        .progress-segment {
            height: 10px;
            border-radius: 999px;
            background: #dfe6ef;
            transition: background-color 0.2s ease, box-shadow 0.2s ease;
        }

        .progress-segment.is-complete {
            background: #1f9d55;
        }

        .progress-segment.is-current {
            background: #0070d2;
            box-shadow: 0 0 0 3px rgba(0, 112, 210, 0.2);
        }

        .guide-title {
            margin: 0 0 15px 0;
            font-size: clamp(26px, 3.2vw, 36px);
            color: var(--ru-text);
        }

        .guide-text {
            font-size: clamp(24px, 1.9vw, 33px);
            line-height: 1.6;
            color: #444;
            margin-bottom: 25px;
        }

        .guide-text strong {
            color: var(--ru-blue);
            font-weight: 700;
        }

        .instruction-step { display: none; }
        .instruction-step.active { display: block; animation: fadeIn 0.5s; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* –ö–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ */
        .nav-buttons {
            margin-top: auto;
            display: flex;
            justify-content: space-between;
            gap: 10px;
            border-top: 1px solid #eee;
            padding-top: 20px;
        }

        .nav-btn {
            background: #f0f0f0;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            font-size: clamp(18px, 2.4vw, 20px);
            cursor: pointer;
            transition: background 0.2s;
            color: #333;
        }
        .nav-btn:hover { background: #e0e0e0; }
        .nav-btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .nav-btn.primary { background: var(--ru-blue); color: white; }
        .nav-btn.primary:hover { background: #0056b3; }


        /* --- –ü–†–ê–í–ê–Ø –ü–ê–ù–ï–õ–¨: –¢–ï–õ–ï–§–û–ù --- */
        .phone-case {
            width: 360px;
            height: 620px;
            background: #000;
            border-radius: 40px;
            border: 12px solid #1a1a1a;
            position: relative;
            overflow: hidden;
            box-shadow: 0 30px 60px rgba(0,0,0,0.2);
            flex-shrink: 0;
        }

        .status-bar {
            height: 24px;
            position: absolute;
            top: 0; left: 0; right: 0;
            z-index: 100;
            display: flex;
            justify-content: space-between;
            padding: 5px 20px;
            color: black;
            font-size: 15px;
            font-weight: 600;
            pointer-events: none;
        }

        .screen {
            width: 100%;
            height: 100%;
            background: #fff;
            position: absolute;
            top: 0; left: 0;
            display: none;
            flex-direction: column;
        }
        .screen.active { display: flex; }

        /* –≠–ö–†–ê–ù 1: –†–ê–ë–û–ß–ò–ô –°–¢–û–õ */
        #screen-desktop {
            /* –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –≥—Ä–∞–¥–∏–µ–Ω—Ç */
            background: linear-gradient(180deg, #dbe4f0 0%, #aabdd4 100%);
            width: 100%;
            height: 100%;
            padding-top: 60px;
            box-sizing: border-box;
            position: relative;
        }

        .app-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            padding: 20px;
        }

        .app-icon-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
            cursor: pointer;
        }

        .app-icon {
            width: 58px;
            height: 58px;
            border-radius: 14px;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .app-name {
            font-size: 14px;
            color: #333;
            text-shadow: 0 1px 1px rgba(255,255,255,0.8);
            font-weight: 500;
            text-align: center;
        }

        .icon-rustore {
            background: var(--ru-blue);
            color: white;
            font-family: sans-serif;
            position: relative;
            overflow: hidden;
            font-weight: 900;
        }
        .icon-rustore::before { content: "Ru"; font-size: 22px; z-index: 2; }
        .icon-rustore::after {
            content: ""; position: absolute; bottom: -5px; right: -5px;
            width: 25px; height: 25px; background: rgba(255,255,255,0.2); border-radius: 50%;
        }

        /* –≠–ö–†–ê–ù 2-5: –ò–ù–¢–ï–†–§–ï–ô–° –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø */
        .rustore-header {
            padding: 40px 16px 12px 16px;
            background: var(--ru-bg);
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .search-bar {
            background: var(--ru-gray);
            height: 44px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            padding: 0 12px;
            color: var(--ru-subtext);
            font-size: 18px;
            gap: 8px;
            cursor: text;
            flex: 1;
        }

        .search-icon-svg { width: 20px; height: 20px; fill: #999; }

        .rustore-content {
            background: var(--ru-bg);
            flex: 1;
            padding: 16px;
            overflow-y: auto;
        }

        .banner {
            height: 150px;
            background: linear-gradient(90deg, #ff9a9e 0%, #fad0c4 99%, #fad0c4 100%);
            border-radius: 12px;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 22px;
        }

        .section-title { font-size: 22px; font-weight: 700; margin-bottom: 16px; }

        .app-row {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 0;
            padding: 12px 0;
            border-bottom: 1px solid #f5f5f5;
            cursor: pointer;
        }

        .app-row-icon {
            width: 56px; height: 56px;
            background: #eee;
            border-radius: 12px;
            display: flex; align-items: center; justify-content: center; font-size: 26px;
        }
        .icon-emias { background: #0066CC; color: white; font-weight: bold; }

        .app-row-info { flex: 1; }
        .app-row-title { font-weight: 600; font-size: 18px; margin-bottom: 4px; color: var(--ru-text); }
        .app-row-cat { color: var(--ru-subtext); font-size: 15px; }

        .btn-install-small {
            background: var(--ru-gray);
            color: var(--ru-blue);
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 16px;
        }

        /* --- –ö–õ–ê–í–ò–ê–¢–£–†–ê (–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è) --- */
        .keyboard {
            background: var(--kb-bg);
            padding: 8px 4px 8px 4px;
            position: absolute;
            bottom: 0; left: 0; right: 0;
            display: flex; flex-direction: column; gap: 10px;
            box-sizing: border-box;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
        }

        .key-row { display: flex; justify-content: center; gap: 6px; padding: 0 4px; }

        .key {
            background: var(--kb-key-white);
            border-radius: 6px;
            height: 44px;
            flex: 1;
            display: flex; align-items: center; justify-content: center;
            font-size: 22px; color: #000;
            box-shadow: 0 1px 2px rgba(0,0,0,0.25);
            cursor: pointer;
            font-family: Roboto, sans-serif;
            font-weight: 400;
        }
        .key:active { background: #eee; transform: translateY(1px); }

        .key.functional { background: var(--kb-key-dark); font-size: 16px; }
        .key.space { flex: 4.5; font-size: 14px; color: #888; }
        .key.enter { background: #388ae0; color: white; flex: 1.2; display: flex; align-items: center; justify-content: center;}

        /* –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ –∑–∞–ø—Ä–æ—Å—É 4 */
        .key.enter-empty {
            background: var(--kb-key-dark); /* –¶–≤–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –∫–Ω–æ–ø–∫–∏ */
            box-shadow: 0 1px 2px rgba(0,0,0,0.25);
            /* –ü—É—Å—Ç–æ–µ –º–µ—Å—Ç–æ */
        }

        /* –°–¢–†–ê–ù–ò–¶–ê –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø */
        .app-details-header {
            display: flex;
            gap: 16px;
            margin-bottom: 24px;
        }
        .app-big-icon {
            width: 80px; height: 80px;
            background: #0066CC;
            border-radius: 18px;
            color: white; font-size: 40px; display: flex; align-items: center; justify-content: center;
        }
        .app-meta h1 { margin: 0 0 6px 0; font-size: 22px; color: var(--ru-text); }
        .app-meta p { color: var(--ru-blue); margin: 0; font-size: 16px; }
        .rating { color: #888; margin-top: 6px; font-size: 15px; }

        .main-btn {
            width: 100%;
            height: 44px;
            border-radius: 12px;
            border: none;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
            overflow: hidden;
            display: flex; align-items: center; justify-content: center;
        }

        .btn-blue { background: var(--ru-blue); color: white; }
        .btn-white { background: white; color: var(--ru-blue); border: 2px solid var(--ru-blue); }

        #screen-5 {
            background: #0066CC;
            color: white;
            align-items: center;
            justify-content: center;
            font-size: 44px;
            font-weight: bold;
        }

        /* –ü—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä */
        .progress-fill {
            position: absolute;
            top: 0; left: 0; bottom: 0;
            background: rgba(0,0,0,0.15);
            width: 0%;
            transition: width 0.1s linear;
            z-index: 1;
        }
        .btn-text-content { position: relative; z-index: 2; }

        .rel-with-pulsating-circle {
	        position: relative;
        }

        /* –ü–û–î–°–ö–ê–ó–ö–ê –î–õ–Ø –ö–õ–ò–ö–ê (–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è) */
        /*.pulsating-circle {*/
        /*    position: absolute;*/
        /*    background: rgba(255, 215, 0, 0.3);*/
        /*    border: 2px solid gold;*/
        /*    pointer-events: none;*/
        /*    animation: pulse 1.5s infinite;*/
        /*    z-index: 999;*/
        /*    box-sizing: border-box;*/
	    /*    top: -10%;*/
	    /*    left: -10%;*/
	    /*    width: 120%;*/
	    /*    height: 120%;*/
	    /*    border-radius: 10px;*/
        /*}*/
        /* –ü–û–î–°–ö–ê–ó–ö–ê –î–õ–Ø –ö–õ–ò–ö–ê (–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è) */
        .pulsating-circle {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 215, 0, 0.3);
            border: 2px solid gold;
            pointer-events: none;
            animation: pulse 1.5s infinite;
            z-index: 999;
            box-sizing: border-box;
        }

        @keyframes pulse {
            0% { transform: scale(0.95); opacity: 1; box-shadow: 0 0 0 0 rgba(255, 215, 0, 0.7); }
            70% { transform: scale(1.05); opacity: 1; box-shadow: 0 0 0 10px rgba(255, 215, 0, 0); }
            100% { transform: scale(0.95); opacity: 1; box-shadow: 0 0 0 0 rgba(255, 215, 0, 0); }
        }

        /* –ú–æ–±–∏–ª—å–Ω—ã–π –∞–¥–∞–ø—Ç–∏–≤ */
        @media (max-width: 800px) {
            .simulator-wrapper { flex-direction: column-reverse; align-items: center; }
            .phone-case { transform: scale(0.9); }
            .guide-panel { min-height: auto; }
        }

    </style>
</head>
<body>

<div class="simulator-wrapper">
    <div class="guide-panel">

        <div class="info-progress">
            <div class="info-progress-label">–ü—Ä–æ–≥—Ä–µ—Å—Å –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è</div>
            <div id="info-progress-track" class="info-progress-track"></div>
        </div>

        <div id="steps-container">
            <div class="instruction-step active" id="instr-1">
                <span class="step-badge">–®–∞–≥ 1 –∏–∑ 8</span>
                <h2 class="guide-title">–û—Ç–∫—Ä—ã–≤–∞–µ–º –º–∞–≥–∞–∑–∏–Ω</h2>
                <p class="guide-text">
                    –ù–∞–π–¥–∏—Ç–µ –Ω–∞ —ç–∫—Ä–∞–Ω–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ —Å–∏–Ω–∏–π –∑–Ω–∞—á–æ–∫ —Å –ø–æ–¥–ø–∏—Å—å—é <strong>RuStore</strong>.
                </p>
                <p class="guide-text">
                    –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –Ω–µ–≥–æ, —á—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.
                </p>
            </div>

            <div class="instruction-step" id="instr-2">
                <span class="step-badge">–®–∞–≥ 2 –∏–∑ 8</span>
                <h2 class="guide-title">–ü–æ–∏—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</h2>
                <p class="guide-text">
                    –í—ã –≤ –º–∞–≥–∞–∑–∏–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.
                </p>
                <p class="guide-text">
                    –ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Å–µ—Ä—É—é —Å—Ç—Ä–æ–∫—É <strong>"–ü–æ–∏—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π"</strong> –≤ —Å–∞–º–æ–º –≤–µ—Ä—Ö—É —ç–∫—Ä–∞–Ω–∞.
                </p>
            </div>

            <div class="instruction-step" id="instr-3">
                <span class="step-badge">–®–∞–≥ 3 –∏–∑ 8</span>
                <h2 class="guide-title">–í–≤–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏—è</h2>
                <p class="guide-text">
                    –ù–∞–∂–∏–º–∞–π—Ç–µ –Ω–∞ –±—É–∫–≤—ã –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ, —á—Ç–æ–±—ã –≤–≤–µ—Å—Ç–∏ —Å–ª–æ–≤–æ <strong>–ï–ú–ò–ê–°</strong>.
                </p>
            </div>

            <div class="instruction-step" id="instr-4">
                <span class="step-badge">–®–∞–≥ 4 –∏–∑ 8</span>
                <h2 class="guide-title">–í—ã–±–æ—Ä –∏–∑ —Å–ø–∏—Å–∫–∞</h2>
                <p class="guide-text">
                    –í —Å–ø–∏—Å–∫–µ –ø–æ—è–≤–∏–ª–æ—Å—å –Ω—É–∂–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.
                </p>
                <p class="guide-text">
                    –ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–æ—á–∫—É <strong>–ï–ú–ò–ê–°.–ò–ù–§–û</strong>.
                </p>
            </div>

            <div class="instruction-step" id="instr-5">
                <span class="step-badge">–®–∞–≥ 5 –∏–∑ 8</span>
                <h2 class="guide-title">–£—Å—Ç–∞–Ω–æ–≤–∫–∞</h2>
                <p class="guide-text">
                    –ù–∞–∂–º–∏—Ç–µ –±–æ–ª—å—à—É—é —Å–∏–Ω—é—é –∫–Ω–æ–ø–∫—É <strong>–°–∫–∞—á–∞—Ç—å</strong>.
                </p>
            </div>

            <div class="instruction-step" id="instr-6">
                <span class="step-badge">–®–∞–≥ 6 –∏–∑ 8</span>
                <h2 class="guide-title">–û–∂–∏–¥–∞–Ω–∏–µ...</h2>
                <p class="guide-text">
                    –ü–æ–¥–æ–∂–¥–∏—Ç–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏.
                </p>
                <div style="margin-top: 20px; display: flex; justify-content: center;">
                    <div style="width: 30px; height: 30px; border: 3px solid #eee; border-top: 3px solid var(--ru-blue); border-radius: 50%; animation: spin 1s infinite linear;"></div>
                </div>
                <style>@keyframes spin { 100% { transform: rotate(360deg); } }</style>
            </div>

            <div class="instruction-step" id="instr-7">
                <span class="step-badge" style="background: green;">–ì–æ—Ç–æ–≤–æ!</span>
                <h2 class="guide-title">–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞</h2>
                <p class="guide-text">
                    –ö–Ω–æ–ø–∫–∞ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å –Ω–∞ "–û—Ç–∫—Ä—ã—Ç—å".
                </p>
                <p class="guide-text">
                    –ù–∞–∂–º–∏—Ç–µ <strong>–û—Ç–∫—Ä—ã—Ç—å</strong>, —á—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.
                </p>
            </div>

            <div class="instruction-step" id="instr-8">
                <span class="step-badge" style="background: #333;">–§–∏–Ω–∞–ª</span>
                <h2 class="guide-title">–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! üéâ</h2>
                <p class="guide-text">
                    –í—ã —É—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ RuStore.
                </p>
                <br>
                <a href="/tutorials" class="step-badge" style="text-decoration: none; background: #555; cursor: pointer;">–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É —É—Ä–æ–∫–æ–≤</a>
            </div>
        </div>

        <div class="nav-buttons">
            <button class="nav-btn" id="btn-prev" onclick="manualPrev()">‚Üê –ù–∞–∑–∞–¥</button>
            <button class="nav-btn" id="btn-restart" onclick="restartTutorial()">‚Ü∫ –ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
            <button class="nav-btn primary" id="btn-next" onclick="manualNext()">–î–∞–ª–µ–µ ‚Üí</button>
        </div>

    </div>

    <div class="phone-case">
        <div class="status-bar">
            <span>12:30</span>
            <span>100%</span>
        </div>

	    <div id="click-hint" class="pulsating-circle" style="display: none;"></div>

        <div id="screen-1" class="screen active">
            <div id="screen-desktop">
                <div class="app-grid">
                    <div class="app-icon-wrapper">
                        <div class="app-icon" style="background: #4CAF50; color: white;">üìû</div>
                        <span class="app-name">–¢–µ–ª–µ—Ñ–æ–Ω</span>
                    </div>
                    <div class="app-icon-wrapper">
                        <div class="app-icon" style="background: #2196F3; color: white;">üí¨</div>
                        <span class="app-name">–°–ú–°</span>
                    </div>
                    <div class="app-icon-wrapper">
                        <div class="app-icon" style="background: #FF5722; color: white;">üì∏</div>
                        <span class="app-name">–ö–∞–º–µ—Ä–∞</span>
                    </div>
	                <div class="rel-with-pulsating-circle">
		                <div class="app-icon-wrapper" id="target-icon-rustore" onclick="goToStep(2)">
	                        <div class="app-icon icon-rustore"></div>
	                        <span class="app-name">RuStore</span>
	                    </div>
<!--                        <div id="click-hint" class="pulsating-circle" style="display: none;"></div>-->
	                </div>
                    <div class="app-icon-wrapper">
                        <div class="app-icon" style="background: #FFC107; color: white;">‚öôÔ∏è</div>
                        <span class="app-name">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
                    </div>
                    <div class="app-icon-wrapper">
                        <div class="app-icon" style="background: #fff; color: #d00;">M</div>
                        <span class="app-name">–ü–æ—á—Ç–∞</span>
                    </div>
                    <div class="app-icon-wrapper">
                        <div class="app-icon" style="background: #777; color: white;">‚è∞</div>
                        <span class="app-name">–ß–∞—Å—ã</span>
                    </div>
                     <div class="app-icon-wrapper">
                        <div class="app-icon" style="background: #fff; color: #333;">üìÖ</div>
                        <span class="app-name">–í—Å—Ç—Ä–µ—á–∏</span>
                    </div>
                </div>
            </div>
        </div>

        <div id="screen-2" class="screen">
            <div class="rustore-header">
                <div class="search-bar" id="target-search-bar" onclick="goToStep(3)">
                    <svg class="search-icon-svg" viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
                    <span>–ü–æ–∏—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π</span>
                </div>
            </div>
            <div class="rustore-content">
                <div class="banner">–í–∞–∂–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</div>
                <div class="section-title">–ü–æ–ø—É–ª—è—Ä–Ω–æ–µ</div>

                <div class="app-row">
                    <div class="app-row-icon" style="background: green; color: white;">S</div>
                    <div class="app-row-info">
                        <div class="app-row-title">–°–±–µ—Ä–±–∞–Ω–∫</div>
                        <div class="app-row-cat">–§–∏–Ω–∞–Ω—Å—ã</div>
                    </div>
                    <button class="btn-install-small">–°–∫–∞—á–∞—Ç—å</button>
                </div>

                <div class="app-row">
                    <div class="app-row-icon" style="background: red; color: white;">M</div>
                    <div class="app-row-info">
                        <div class="app-row-title">–ú–¢–°</div>
                        <div class="app-row-cat">–°–≤—è–∑—å</div>
                    </div>
                    <button class="btn-install-small">–û—Ç–∫—Ä—ã—Ç—å</button>
                </div>
            </div>
        </div>

        <div id="screen-3" class="screen">
            <div class="rustore-header">
                <div class="search-bar" style="color: black; font-weight: 500;">
                    <span style="font-size: 22px; color: #0077FF; margin-right: 5px;">‚Üê</span>
                    <span id="search-input-text" style="border-right: 2px solid #0077FF; padding-right: 2px;">|</span>
                </div>
            </div>

            <div id="search-results-list" class="rustore-content" style="display: none; padding-top: 0;">
                <div class="app-row" id="target-search-result" onclick="goToStep(5)">
                    <div class="app-row-icon icon-emias">–ï</div>
                    <div class="app-row-info">
                        <div class="app-row-title">–ï–ú–ò–ê–°.–ò–ù–§–û</div>
                        <div class="app-row-cat">–ú–µ–¥–∏—Ü–∏–Ω–∞ ‚Ä¢ 38 –ú–±</div>
                    </div>
                    <button class="btn-install-small">–°–∫–∞—á–∞—Ç—å</button>
                </div>
            </div>

            <div class="keyboard" id="keyboard-area" onclick="typeLetter()">
                <div class="key-row">
                    <div class="key">–π</div><div class="key">—Ü</div><div class="key">—É</div><div class="key">–∫</div><div class="key">–µ</div><div class="key">–Ω</div><div class="key">–≥</div><div class="key">—à</div><div class="key">—â</div><div class="key">–∑</div><div class="key">—Ö</div>
                </div>
                <div class="key-row">
                    <div class="key">—Ñ</div><div class="key">—ã</div><div class="key">–≤</div><div class="key">–∞</div><div class="key">–ø</div><div class="key">—Ä</div><div class="key">–æ</div><div class="key">–ª</div><div class="key">–¥</div><div class="key">–∂</div><div class="key">—ç</div>
                </div>
                 <div class="key-row" style="padding: 0 15px;">
                    <div class="key functional">‚áß</div>
                    <div class="key">—è</div><div class="key">—á</div><div class="key">—Å</div><div class="key">–º</div><div class="key">–∏</div><div class="key">—Ç</div><div class="key">—å</div><div class="key">–±</div><div class="key">—é</div>
                    <div class="key functional">‚å´</div>
                </div>
                <div class="key-row">
                    <div class="key functional">?123</div>
                    <div class="key">,</div> <div class="key space"></div> <div class="key">.</div>
                    <div class="key enter-empty"></div> </div>
            </div>
        </div>

        <div id="screen-4" class="screen">
            <div class="rustore-header" style="border:none;">
                <span style="font-size: 26px; color: #0077FF;" onclick="prevStep()">‚Üê</span>
                <span style="flex:1; text-align: right; font-size: 22px;">...</span>
            </div>
            <div class="rustore-content">
                <div class="app-details-header">
                    <div class="app-big-icon">–ï</div>
                    <div class="app-meta">
                        <h1>–ï–ú–ò–ê–°.–ò–ù–§–û</h1>
                        <p>–î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç –ò–¢ –ú–æ—Å–∫–≤—ã</p>
                        <div class="rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 4.8</div>
                    </div>
                </div>

                <button id="main-download-btn" class="main-btn btn-blue" onclick="startDownload()">
                    <div class="progress-fill" id="progress-bar"></div>
                    <span id="btn-text" class="btn-text-content">–°–∫–∞—á–∞—Ç—å</span>
                </button>

                <div style="margin-top: 20px; line-height: 1.5; color: #555;">
                    –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∑–∞–ø–∏—Å–∏ –∫ –≤—Ä–∞—á—É.
                </div>

                <div style="display: flex; gap: 10px; margin-top: 20px; overflow-x: auto; padding-bottom: 10px;">
                    <div style="width: 100px; height: 160px; background: #eee; border-radius: 8px; flex-shrink: 0;"></div>
                    <div style="width: 100px; height: 160px; background: #eee; border-radius: 8px; flex-shrink: 0;"></div>
                </div>
            </div>
        </div>

        <div id="screen-5" class="screen">
            –ï–ú–ò–ê–°
        </div>

    </div>
</div>

<script>
    let currentStep = 1;
    const searchTarget = "–ï–ú–ò–ê–°";
    let typedText = "";
    const totalSteps = 8;
    let downloadInterval = null;
    const progressTrack = document.getElementById('info-progress-track');

    function ensureProgressSegments() {
        progressTrack.style.setProperty('--segments-count', String(totalSteps));

        if (progressTrack.childElementCount === totalSteps) {
            return;
        }

        progressTrack.innerHTML = '';
        for (let i = 0; i < totalSteps; i += 1) {
            const segment = document.createElement('span');
            segment.className = 'progress-segment';
            progressTrack.appendChild(segment);
        }
    }

    function updateProgressBar(step) {
        ensureProgressSegments();
        const segments = Array.from(progressTrack.children);
        const isCompleted = step >= totalSteps;
        const currentIndex = isCompleted ? totalSteps - 1 : Math.max(0, step - 1);

        segments.forEach((segment, index) => {
            segment.classList.remove('is-complete', 'is-current');
            if (isCompleted || index < currentIndex) {
                segment.classList.add('is-complete');
            } else if (index === currentIndex) {
                segment.classList.add('is-current');
            }
        });
    }

    // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–¥—Å–≤–µ—Ç–∫–∏ –ø–æ —à–∞–≥–∞–º
    const hintConfigs = {
        1: { targetId: "target-icon-rustore", padding: 8, borderRadius: "12px" },
        2: { targetId: "target-search-bar", padding: 6, borderRadius: "10px" },
        3: { targetId: "keyboard-area", padding: 6, borderRadius: "10px" },
        4: { targetId: "target-search-result", padding: 2, borderRadius: "10px" },
        5: { targetId: "main-download-btn", padding: 4, borderRadius: "12px" },
        6: { display: "none" }, // –ü—Ä–æ—Ü–µ—Å—Å
        7: { targetId: "main-download-btn", padding: 4, borderRadius: "12px" },
        8: { display: "none" }
    };

    function updateHint(step) {
        const h = document.getElementById('click-hint');
        const config = hintConfigs[step];

        if (!config || config.display === "none") {
            h.style.display = "none";
            return;
        }

        if (config.targetId) {
            const target = document.getElementById(config.targetId);
            const container = document.querySelector('.phone-case');
            if (!target || !container) {
                h.style.display = "none";
                return;
            }

            const targetRect = target.getBoundingClientRect();
            const containerRect = container.getBoundingClientRect();
            if (!targetRect.width || !targetRect.height) {
                h.style.display = "none";
                return;
            }

            const scaleX = containerRect.width / container.offsetWidth || 1;
            const scaleY = containerRect.height / container.offsetHeight || 1;
            const padding = Number(config.padding || 0);

            const top = (
                (targetRect.top - containerRect.top) / scaleY
                - container.clientTop
                - padding
            );
            const left = (
                (targetRect.left - containerRect.left) / scaleX
                - container.clientLeft
                - padding
            );
            const width = (targetRect.width / scaleX) + (padding * 2);
            const height = (targetRect.height / scaleY) + (padding * 2);

            h.style.display = "block";
            h.style.top = `${top}px`;
            h.style.left = `${left}px`;
            h.style.right = "auto";
            h.style.bottom = "auto";
            h.style.width = `${width}px`;
            h.style.height = `${height}px`;
            h.style.borderRadius = config.borderRadius || "12px";
            return;
        }

        h.style.display = "block";
        h.style.top = config.top || "auto";
        h.style.left = config.left || "auto";
        h.style.right = config.right || "auto";
        h.style.bottom = config.bottom || "auto";
        h.style.width = config.width || "60px";
        h.style.height = config.height || "60px";
        h.style.borderRadius = config.borderRadius || "50%";
    }

    function goToStep(step) {
        if (step < 1 || step > totalSteps) return;

        if (downloadInterval) {
            clearInterval(downloadInterval);
            downloadInterval = null;
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º UI –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
        document.querySelectorAll('.instruction-step').forEach(el => el.classList.remove('active'));
        const instr = document.getElementById('instr-' + step);
        if (instr) instr.classList.add('active');

        currentStep = step;
        updateNavButtons();
        updateProgressBar(step);

        // –õ–æ–≥–∏–∫–∞ —ç–∫—Ä–∞–Ω–æ–≤
        document.querySelectorAll('.screen').forEach(el => el.style.display = 'none');

        if (step === 1) document.getElementById('screen-1').style.display = 'flex'; // Home
        if (step === 2) document.getElementById('screen-2').style.display = 'flex'; // Store Main
        if (step === 3 || step === 4) document.getElementById('screen-3').style.display = 'flex'; // Search
        if (step >= 5 && step < 8) document.getElementById('screen-4').style.display = 'flex'; // App Details
        if (step === 8) document.getElementById('screen-5').style.display = 'flex'; // Final App Screen

        // –û—Å–æ–±—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è —à–∞–≥–æ–≤
        const kbArea = document.getElementById('keyboard-area');
        const resultsList = document.getElementById('search-results-list');
        const searchInput = document.getElementById('search-input-text');

        // –®–∞–≥ 3: –í–≤–æ–¥
        if (step === 3) {
            kbArea.style.display = 'flex';
            resultsList.style.display = 'none';
            typedText = ""; // –°–±—Ä–æ—Å –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ
            searchInput.innerText = "|";
        }

        // –®–∞–≥ 4: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã
        if (step === 4) {
            kbArea.style.display = 'none';
            resultsList.style.display = 'block';
            searchInput.innerText = "–ï–ú–ò–ê–°";
            searchInput.style.borderRight = "none";
        }

        // –®–∞–≥ 7: –ö–Ω–æ–ø–∫–∞ –û—Ç–∫—Ä—ã—Ç—å
        if (step === 7) {
            const btn = document.getElementById('main-download-btn');
            btn.className = "main-btn btn-white";
            document.getElementById('btn-text').innerText = "–û—Ç–∫—Ä—ã—Ç—å";
            document.getElementById('progress-bar').style.width = "0%";
            btn.onclick = function() { goToStep(8); };
        } else if (step === 5 || step === 6) {
             // –°–±—Ä–æ—Å –∫–Ω–æ–ø–∫–∏ –µ—Å–ª–∏ –≤–µ—Ä–Ω—É–ª–∏—Å—å –Ω–∞–∑–∞–¥
            const btn = document.getElementById('main-download-btn');
            btn.className = "main-btn btn-blue";
            document.getElementById('btn-text').innerText = "–°–∫–∞—á–∞—Ç—å";
            btn.onclick = startDownload;
        }

        updateHint(step);

    }

    function restartTutorial() {
        typedText = "";
        goToStep(1);
    }

    // –†—É—á–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è (–ó–∞–ø—Ä–æ—Å 3)
    function manualPrev() {
        if (currentStep > 1) goToStep(currentStep - 1);
    }

    function manualNext() {
        // –†–∞–∑—Ä–µ—à–∞–µ–º –∏–¥—Ç–∏ –≤–ø–µ—Ä–µ–¥, –µ—Å–ª–∏ —ç—Ç–æ –Ω–µ —à–∞–≥ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º (6)
        if (currentStep < totalSteps && currentStep !== 6) {
            goToStep(currentStep + 1);
        }
    }

    function updateNavButtons() {
        document.getElementById('btn-prev').disabled = currentStep === 1;
        document.getElementById('btn-next').disabled = currentStep === totalSteps || currentStep === 6; // –ë–ª–æ–∫–∏—Ä—É–µ–º –Ω–∞ –∑–∞–≥—Ä—É–∑–∫–µ
    }

    // –°–∏–º—É–ª—è—Ü–∏—è –ø–µ—á–∞—Ç–∏
    function typeLetter() {
        if (currentStep !== 3) return;

        // –°–∫—Ä—ã–≤–∞–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É –ø—Ä–∏ –Ω–∞—á–∞–ª–µ –≤–≤–æ–¥–∞
        document.getElementById('click-hint').style.display = 'none';

        const textEl = document.getElementById('search-input-text');
        if (typedText.length < searchTarget.length) {
            typedText += searchTarget[typedText.length];
            textEl.innerText = typedText + "|";
        }

        if (typedText === searchTarget) {
            setTimeout(() => { goToStep(4); }, 400);
        }
    }

    // –°–∏–º—É–ª—è—Ü–∏—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
    function startDownload() {
        if (currentStep !== 5) return;

        goToStep(6);
        const btnText = document.getElementById('btn-text');
        const progressBar = document.getElementById('progress-bar');

        btnText.innerText = "–ó–∞–≥—Ä—É–∑–∫–∞...";
        let progress = 0;

        downloadInterval = setInterval(() => {
            progress += 2;
            progressBar.style.width = progress + "%";

            if (progress >= 100) {
                clearInterval(downloadInterval);
                downloadInterval = null;
                goToStep(7);
            }
        }, 50);
    }

    // –°—Ç–∞—Ä—Ç
    ensureProgressSegments();
    updateProgressBar(1);
    updateHint(1);
    updateNavButtons();

    window.addEventListener('resize', () => updateHint(currentStep));
</script>

</body>
</html>
