<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>msk communicator</title>
    <link rel="stylesheet" href="/static/style.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 24px;
        }
        h1 {
            margin: 12px 0 24px;
        }
        .section {
            border: 1px solid #ddd;
            padding: 16px;
            margin-bottom: 16px;
            border-radius: 8px;
        }
        .section h2 {
            margin: 0 0 12px;
        }
        .row {
            margin-bottom: 8px;
        }
        label {
            display: inline-block;
            min-width: 180px;
        }
        input[type="text"],
        input[type="tel"],
        input[type="password"] {
            padding: 6px 8px;
            min-width: 260px;
        }
        .avatar-grid {
            display: grid;
            grid-template-columns: repeat(5, minmax(80px, 1fr));
            gap: 12px;
        }
        .avatar-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 8px;
            cursor: pointer;
        }
        .avatar-placeholder {
            width: 64px;
            height: 64px;
            border-radius: 50%;
            background: #e9e9e9;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        .danger {
            border-color: #b30000;
            background: #fff3f3;
        }
        .danger h2 {
            color: #b30000;
        }
        .danger .warning {
            font-weight: bold;
            margin-bottom: 8px;
        }
        .danger button {
            background: #b30000;
            color: #fff;
            border: none;
            padding: 8px 16px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    {% include "topbar.tmpl" %}
    <h1>Настройки аккаунта</h1>

    <div class="section">
        <h2>Сменить имя пользователя</h2>
        <form action="/api/account/update_name" method="post">
            <div class="row">
                <label for="name">Новое имя:</label>
                <input type="text" id="name" name="name" value="{{ user[2] }}">
            </div>
            <button type="submit">Сохранить имя</button>
        </form>
    </div>

    <div class="section">
        <h2>Сменить номер телефона</h2>
        <form action="/api/account/update_tel" method="post">
            <div class="row">
                <label for="tel">Новый номер:</label>
                <input type="tel" id="tel" name="tel" value="{{ user[1] }}">
            </div>
            <button type="submit">Сохранить номер</button>
        </form>
    </div>

    <div class="section">
        <h2>Сменить пароль</h2>
        <form action="/api/account/update_password" method="post">
            <div class="row">
                <label for="current_pwd">Текущий пароль:</label>
                <input type="password" id="current_pwd" name="current_pwd">
            </div>
            <div class="row">
                <label for="new_pwd">Новый пароль:</label>
                <input type="password" id="new_pwd" name="new_pwd">
            </div>
            <div class="row">
                <label for="new_pwd_confirm">Повторите пароль:</label>
                <input type="password" id="new_pwd_confirm" name="new_pwd_confirm">
            </div>
            <button type="submit">Обновить пароль</button>
        </form>
    </div>

    <div class="section">
        <h2>Аватар профиля (плейсхолдеры)</h2>
        <form action="/api/account/update_avatar" method="post">
            <div class="avatar-grid">
                {% for a in avatars %}
                <label class="avatar-card">
                    <div class="avatar-placeholder">{{ a[-1] }}</div>
                    <input type="radio" name="avatar" value="{{ a }}" {% if user[5] == a %}checked{% endif %}>
                </label>
                {% endfor %}
            </div>
            <div class="row" style="margin-top: 12px;">
                <button type="submit">Сохранить аватар</button>
            </div>
        </form>
    </div>

    <div class="section danger">
        <h2>Удалить аккаунт</h2>
        <div class="warning">Внимание: это действие необратимо.</div>
        <form action="/api/account/delete" method="post">
            <div class="row">
                <label for="confirm_delete">Подтверждение:</label>
                <input type="checkbox" id="confirm_delete" name="confirm_delete">
                <span>Я понимаю, что аккаунт будет удалён навсегда</span>
            </div>
            <div class="row">
                <label for="delete_pwd">Пароль:</label>
                <input type="password" id="delete_pwd" name="delete_pwd">
            </div>
            <button type="submit">удалить</button>
        </form>
    </div>
</body>
</html>
